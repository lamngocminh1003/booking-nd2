# üîÅ H∆∞·ªõng D·∫´n Nh√¢n B·∫£n Ph√≤ng Kh√°m

## T·ªïng Quan

Ch·ª©c nƒÉng nh√¢n b·∫£n ph√≤ng cho ph√©p b·∫°n sao ch√©p c√°c ph√≤ng kh√°m hi·ªán c√≥ sang c√°c ca kh√°m kh√°c m·ªôt c√°ch nhanh ch√≥ng v√† hi·ªáu qu·∫£.

## üéØ C√°c C√°ch Nh√¢n B·∫£n Ph√≤ng

### 1. üìç Nh√¢n B·∫£n T·ª´ng Ph√≤ng Ri√™ng L·∫ª

- **C√°ch th·ª±c hi·ªán**: Hover chu·ªôt v√†o ph√≤ng b·∫•t k·ª≥
- **N√∫t hi·ªán ra**: N√∫t copy (üîÅ) m√†u t√≠m ·ªü g√≥c ph·∫£i tr√™n
- **K·∫øt qu·∫£**: Ch·ªçn ngay ph√≤ng ƒë√≥ v√† m·ªü dialog nh√¢n b·∫£n

**üí° M·∫πo**: Tooltip s·∫Ω hi·ªán "üí° Hover ƒë·ªÉ th·∫•y n√∫t nh√¢n b·∫£n ph√≤ng n√†y!"

### 2. üéõÔ∏è Ch·∫ø ƒê·ªô Nh√¢n B·∫£n (Ch·ªçn Nhi·ªÅu Ph√≤ng)

- **V·ªã tr√≠**: Header c·ªßa √¥ c√≥ ph√≤ng
- **N√∫t**: "Ch·∫ø ƒë·ªô nh√¢n b·∫£n" (m√†u t√≠m)
- **Ch·ª©c nƒÉng**:
  - V√†o ch·∫ø ƒë·ªô ch·ªçn ph√≤ng
  - C√≥ th·ªÉ ch·ªçn/b·ªè ch·ªçn t·ª´ng ph√≤ng
  - N√∫t "Ch·ªçn t·∫•t c·∫£" v√† "H·ªßy"
  - N√∫t "Clone (X)" v·ªõi X l√† s·ªë ph√≤ng ƒë√£ ch·ªçn

### 3. ‚ö° Nh√¢n B·∫£n T·∫•t C·∫£ Ph√≤ng

- **V·ªã tr√≠**: Header c·ªßa √¥ c√≥ ph√≤ng
- **N√∫t**: "Nh√¢n b·∫£n t·∫•t c·∫£ (X)" (m√†u xanh l√°)
- **Ch·ª©c nƒÉng**: T·ª± ƒë·ªông ch·ªçn t·∫•t c·∫£ ph√≤ng v√† m·ªü dialog ngay

## üé® Visual Indicators

### Badge "C√≥ Th·ªÉ Nh√¢n B·∫£n"

```
üîµ Ph√≤ng (3) [üîÅ C√≥ th·ªÉ nh√¢n b·∫£n]
```

- Hi·ªán khi c√≥ ph√≤ng trong √¥
- M√†u t√≠m, font nh·ªè
- B√°o hi·ªáu ch·ª©c nƒÉng nh√¢n b·∫£n s·∫µn s√†ng

### Hover Effects

- **N√∫t clone ri√™ng l·∫ª**: Hi·ªán khi hover, c√≥ shadow v√† animation
- **Tooltip**: H∆∞·ªõng d·∫´n ng·∫Øn g·ªçn

## üéõÔ∏è Dialog Nh√¢n B·∫£n

### T√πy Ch·ªçn Clone

```
‚úÖ Copy b√°c sƒ©
‚úÖ Copy chuy√™n khoa
‚úÖ Copy lo·∫°i kh√°m
‚úÖ Copy c√†i ƒë·∫∑t th·ªùi gian
‚úÖ Copy s·ªë l∆∞·ª£t kh√°m & gi·ªØ ch·ªó
‚ùå Copy ghi ch√∫ (m·∫∑c ƒë·ªãnh t·∫Øt)
```

### Ch·ªçn Target Slots

- **Hi·ªÉn th·ªã**: Theo ng√†y trong tu·∫ßn
- **L·ªçc**: Ch·ªâ c√°c ca ƒëang ho·∫°t ƒë·ªông
- **R√†ng bu·ªôc**: Ch·ªâ nh√¢n b·∫£n trong c√πng khoa (kh√¥ng cross-department)

## üìã Quy Tr√¨nh S·ª≠ D·ª•ng

### B∆∞·ªõc 1: Ch·ªçn Ph√≤ng

```
C√°ch 1: Hover ‚Üí Click n√∫t copy
C√°ch 2: "Ch·∫ø ƒë·ªô nh√¢n b·∫£n" ‚Üí Ch·ªçn ph√≤ng ‚Üí "Clone (X)"
C√°ch 3: "Nh√¢n b·∫£n t·∫•t c·∫£" ‚Üí T·ª± ƒë·ªông ch·ªçn t·∫•t c·∫£
```

### B∆∞·ªõc 2: C·∫•u H√¨nh Clone Options

```
- Ch·ªçn th√¥ng tin mu·ªën copy
- M·∫∑c ƒë·ªãnh: T·∫•t c·∫£ ‚úÖ tr·ª´ ghi ch√∫ ‚ùå
```

### B∆∞·ªõc 3: Ch·ªçn Target Slots

```
- Ch·ªçn c√°c ca mu·ªën nh√¢n b·∫£n ƒë·∫øn
- C√≥ th·ªÉ ch·ªçn nhi·ªÅu ca c√πng l√∫c
- Ch·ªâ trong c√πng khoa hi·ªán t·∫°i
```

### B∆∞·ªõc 4: X√°c Nh·∫≠n

```
- Click "Nh√¢n b·∫£n"
- Hi·ªÉn th·ªã toast th√†nh c√¥ng
- Animation highlight c√°c √¥ ƒë√≠ch
```

## üé¨ Animation & Feedback

### Toast Notification

```
‚úÖ Nh√¢n b·∫£n ph√≤ng th√†nh c√¥ng!
ƒê√£ nh√¢n b·∫£n 2 ph√≤ng [PK 511A, PK 512] sang 3 ca

[üéØ Xem l·∫°i] ‚Üê Button ƒë·ªÉ replay animation
```

### Sequential Highlighting

- Highlight t·ª´ng √¥ ƒë√≠ch theo th·ª© t·ª±
- Delay 800ms gi·ªØa c√°c √¥
- Badge hi·ªÉn th·ªã ·ªü g√≥c √¥ ƒë∆∞·ª£c nh√¢n b·∫£n
- Auto clear sau 10 gi√¢y

## üîß Constraints & Rules

### R√†ng Bu·ªôc Khoa Ph√≤ng

```javascript
// ‚úÖ CH·ªà nh√¢n b·∫£n trong c√πng khoa
properTargetSlots = targetSlots.map((baseSlotId) => `${deptId}-${baseSlotId}`);
```

### Conditional Time Settings

```javascript
// N·∫øu Copy gi·ªù t√πy ch·ªânh = true:
//   - C√πng ca: Gi·ªØ nguy√™n gi·ªù custom
//   - Kh√°c ca: Reset v·ªÅ gi·ªù m·∫∑c ƒë·ªãnh ca ƒë√≠ch

// N·∫øu Copy gi·ªù t√πy ch·ªânh = false:
//   - Lu√¥n reset v·ªÅ gi·ªù m·∫∑c ƒë·ªãnh ca ƒë√≠ch
```

### Appointment Count Copy

```javascript
// N·∫øu Copy s·ªë l∆∞·ª£t kh√°m = true:
//   - appointmentCount: source ‚Üí target
//   - holdSlot: source ‚Üí target
//   - maxAppointments: source ‚Üí target

// N·∫øu Copy s·ªë l∆∞·ª£t kh√°m = false:
//   - D√πng default: 10 l∆∞·ª£t, 0 gi·ªØ ch·ªó
```

## üí° Tips & Best Practices

### 1. Workflow Hi·ªáu Qu·∫£

```
1. Thi·∫øt l·∫≠p 1 ph√≤ng m·∫´u v·ªõi ƒë·∫ßy ƒë·ªß th√¥ng tin
2. D√πng "Nh√¢n b·∫£n t·∫•t c·∫£" ƒë·ªÉ copy nhanh
3. ƒêi·ªÅu ch·ªânh t·ª´ng ph√≤ng n·∫øu c·∫ßn
```

### 2. Tr√°nh Conflicts

```
- Ki·ªÉm tra clinic schedules tr∆∞·ªõc khi clone
- Ch√∫ √Ω warning v·ªÅ doctor/room conflicts
- S·ª≠ d·ª•ng different time slots n·∫øu c√≥ xung ƒë·ªôt
```

### 3. Performance

```
- Clone nhi·ªÅu ph√≤ng 1 l√∫c thay v√¨ t·ª´ng ph√≤ng
- S·ª≠ d·ª•ng "Ch·ªçn t·∫•t c·∫£" khi mu·ªën clone full set
- Check animation feedback ƒë·ªÉ ƒë·∫£m b·∫£o clone th√†nh c√¥ng
```

## üêõ Troubleshooting

### Kh√¥ng Th·∫•y N√∫t Clone?

```
‚ùå C√≥ th·ªÉ: Ch∆∞a c√≥ ph√≤ng n√†o trong √¥
‚úÖ Gi·∫£i ph√°p: Th√™m ph√≤ng tr∆∞·ªõc, sau ƒë√≥ hover ƒë·ªÉ th·∫•y n√∫t copy
```

### Clone Kh√¥ng Th√†nh C√¥ng?

```
‚ùå C√≥ th·ªÉ: L·ªói TypeScript ho·∫∑c validation
‚úÖ Gi·∫£i ph√°p: Check console.log, ƒë·∫£m b·∫£o onCloneRooms prop ƒë∆∞·ª£c truy·ªÅn
```

### Animation Kh√¥ng Hi·ªán?

```
‚ùå C√≥ th·ªÉ: DOM elements ch∆∞a c√≥ data-slot-id
‚úÖ Gi·∫£i ph√°p: ƒê·∫£m b·∫£o WeeklyScheduleTable render ƒë√∫ng slot IDs
```

## üìä Technical Notes

### Function Signatures

```typescript
onCloneRooms?: (
  rooms: any[],
  targetSlots?: string[],
  targetDepartmentIds?: string[],
  cloneOptions?: any,
  sourceSlotId?: string
) => void;
```

### State Management

```typescript
const [selectedRooms, setSelectedRooms] = useState<Set<number>>(new Set());
const [isRoomCloneMode, setIsRoomCloneMode] = useState(false);
const [showRoomCloneDialog, setShowRoomCloneDialog] = useState(false);
```

---

‚ú® **Ch√∫c b·∫°n s·ª≠ d·ª•ng ch·ª©c nƒÉng nh√¢n b·∫£n ph√≤ng hi·ªáu qu·∫£!** ‚ú®
